## [1/8] AUDIT â€” duplicates & catch-alls
== Files that look like duplicate dashboards / settings / test UIs ==
scripts/nuke_and_rebuild.sh:37:rg -n --no-heading -S 'DashboardTest|Staff Dashboard Test|Tenant-aware settings' client || true
client/src/pages/Dashboard.tsx:2:import TopTabsDashboard from "./staff/TopTabsDashboard";
client/src/pages/Dashboard.tsx:4:  return <TopTabsDashboard />;
client/src/pages/staff/TopTabsDashboard.tsx:51:export default function TopTabsDashboard() {

== Multiple index.html files under dist paths ==
./.cache/Cypress/14.5.1/Cypress/resources/app/node_modules/@packages/app/dist/index.html
./.cache/Cypress/14.5.1/Cypress/resources/app/node_modules/@packages/launchpad/dist/index.html
./.cache/Cypress/14.5.1/Cypress/resources/app/packages/app/dist/index.html
./.cache/Cypress/14.5.1/Cypress/resources/app/packages/launchpad/dist/index.html
./.cache/Cypress/14.5.2/Cypress/resources/app/node_modules/@packages/app/dist/index.html
./.cache/Cypress/14.5.2/Cypress/resources/app/node_modules/@packages/launchpad/dist/index.html
./.cache/Cypress/14.5.2/Cypress/resources/app/packages/app/dist/index.html
./.cache/Cypress/14.5.2/Cypress/resources/app/packages/launchpad/dist/index.html
./.cache/Cypress/14.5.4/Cypress/resources/app/node_modules/@packages/app/dist/index.html
./.cache/Cypress/14.5.4/Cypress/resources/app/node_modules/@packages/launchpad/dist/index.html
./.cache/Cypress/14.5.4/Cypress/resources/app/packages/app/dist/index.html
./.cache/Cypress/14.5.4/Cypress/resources/app/packages/launchpad/dist/index.html
./client/dist/index.html

== Greedy server mounts (/, * wildcard, or app.get('*')) ==

== Vite dev markers accidentally served (should be 0) ==

== Multiple pipeline/lenders/settings route mounts (duplicates) ==

== AFTER FIX: index.html timestamps ==
-rw-r--r-- 1 runner runner 1631 Aug 16 00:50 client/dist/index.html

== AFTER FIX: server mounts of /api/* ==
server/index.ts:157:app.use("/api/bootstrap", seedBootstrap);
server/index.ts:436:  app.use("/api/public", module.default);
server/index.ts:524:app.use("/api/ops", errorsOps);
server/index.ts:525:app.use("/api/admin", listsAdmin);
server/index.ts:1462:app.use("/api/pipeline", pipelineBoardRoutes.default);
server/index.ts:1467:app.use("/api/applications", applicationsBoardRoutes.default);
server/index.ts:1472:app.use("/api/ai-reports", aiReportsRoutes.default);
server/index.ts:1477:app.use("/api/feedback", feedbackRoutes.default);
server/index.ts:1482:app.use("/api/ai-train", aiTrainRoutes.default);
server/index.ts:1490:// app.use("/api/auth/webauthn", webauthnRoutes.default);
server/index.ts:1495:app.use("/api/reports-legacy", reportsRoutes.default);
server/index.ts:1500:app.use("/api/notifications", notificationsRoutes.default);
server/index.ts:1511:app.use("/api/backup", backupRoutes.default);
server/index.ts:1516:app.use("/api/ocr", ocrRoutes.default);
server/index.ts:1521:app.use("/api/pipeline", pipelineRoutes.default);
server/index.ts:1526:app.use("/api/lenders", lendersRoutes.default);
server/index.ts:1531:app.use("/api/banking", bankingRoutes.default);
server/index.ts:1541:app.use("/api/routing", routingRoutes.default);
server/index.ts:1551:app.use("/api/tasks", tasksRoutes.default);
server/index.ts:1556:app.use("/api/analytics", analyticsRoutes.default);
server/index.ts:1561:app.use("/api/exports", exportsRoutes.default);
server/index.ts:1574:app.use("/api/chat", chatRoutes.default);
server/index.ts:1614:app.use("/api/automations", automationsSendRouter.default);
server/index.ts:1618:app.use("/api/lenders", lendersRouter.default);
server/index.ts:1623:app.use("/api/docreq", docreqStaffRouter.default);
server/index.ts:1625:app.use("/api/client/docreq", clientDocreqRouter.default);
server/index.ts:1630:app.use("/api/search/global", globalSearchRouter.default);
server/index.ts:1635:app.use("/api/analytics/dashboard", analyticsDashboardRouter.default);
server/index.ts:1640:app.use("/api/apps", appTimelineRouter.default);
server/index.ts:1650:app.use("/api/templates/governance", templateGovernanceRouter.default);
server/index.ts:1655:app.use("/api/ocr/mapping", ocrMappingRouter.default);
server/index.ts:1660:app.use("/api/engine/v11", lenderEngineV11Router.default);
server/index.ts:1665:app.use("/api/ops", opsConsoleRouter.default);
server/index.ts:1670:app.use("/api/security", securityComplianceRouter.default);
server/index.ts:1675:app.use("/api/backups", backupsRouter.default);
server/index.ts:1682:app.use("/api/integrations/credit", creditRoutes.default);
server/index.ts:1683:app.use("/api/integrations/bank", bankRoutes.default);
server/index.ts:1689:app.use("/api/alerts", alertsRouter.default);
server/index.ts:1700:app.use("/api/templates/library", templatesLibraryRouter.default);
server/index.ts:1726:app.use("/api/chat-sessions", chatSessionsRoutes.default);
server/index.ts:1785:app.use("/api/test", testNotificationRoutes.default);
server/index.ts:1792:// app.use("/api/lender-products", lenderProductsRoutes.default);
server/index.ts:1797:app.use("/api/applications", documentValidationRoutes.default);
server/index.ts:1804:  app.use("/api/slf", slfRoutes.default);
server/index.ts:1815:app.use("/api/audit", documentAuditApiRoutes.default);
server/index.ts:1819:app.use("/api/s3-documents", s3DocumentRoutes.default);
server/index.ts:1823:app.use("/api/s3", s3Integration.default);
server/index.ts:1827:app.use("/api/s3-test", s3ProductionTest.default);
server/index.ts:2701:  app.use("/api/ocr", ocrRouter.default);
server/index.ts:2709:  app.use("/api/banking", bankingRouter.default);
server/index.ts:2722:  app.use("/api/conflicts", conflictsRouter.default);
server/index.ts:2922:  app.use("/api/ocr-insights", ocrInsightsRouter.default);
server/index.ts:2930:  app.use("/api/documents", documentsRouter.default);
server/index.ts:2938:  app.use("/api/voice", express.urlencoded({ extended: false }));
server/index.ts:2939:  app.use("/api/voice", voiceRouter);
server/index.ts:2948:    app.use("/api/voice", voiceAuthRouter);
server/index.ts:2958:    app.use("/api/voice/actions", voiceActionsRouter);
server/index.ts:2968:    app.use("/api/voice", voiceEventsRouter);
server/index.ts:2978:  app.use("/api/voice", express.urlencoded({ extended: false }));
server/index.ts:2979:  app.use("/api/voice", voiceSpeakRouter.default);
server/index.ts:2987:  app.use("/api/conference", express.urlencoded({ extended: false }));
server/index.ts:2988:  app.use("/api/conference", conferenceRouter);
server/index.ts:3008:  app.use("/api/webhooks/twilio", express.urlencoded({ extended: false }));
server/index.ts:3009:  app.use("/api/webhooks/twilio", webhookRouter.default);
server/index.ts:3018:  app.use("/api/auth/verify", express.json(), authVerifyRouter.default);
server/index.ts:3027:  app.use("/api/silos", silosRouter.default);
server/index.ts:3036:  app.use("/api/bf/applications", bfApplicationsRouter.default);
server/index.ts:3046://   app.use("/api/slf/contacts", slfContactsRouter.default);
server/index.ts:3053://   app.use("/api/slf/api", slfApiRouter.default);
server/index.ts:3054://   app.use("/api/slf/dialer", slfDialerRouter.default);
server/index.ts:3066:  app.use("/api/quick-s3-test", quickS3Test.default);
server/index.ts:3075:  app.use("/api/application-metadata", applicationMetadataRouter.default);
server/index.ts:3084:  app.use("/api/lenders", lenderOutcomesRouter.default);
server/index.ts:3093:  app.use("/api/users", usersRouter.default);
server/index.ts:3108:  app.use("/api/lender", lenderRouter.default);
server/index.ts:3122:  app.use("/api/dev", devRouter.default);
server/index.ts:3123:  app.use("/api/admin", adminImpersonateRouter.default);
server/index.ts:3124:  app.use("/api/lender/apps", lenderAppsRouter.default);
server/index.ts:3126:  app.use("/api/marketing", marketingRouter.default);
server/index.ts:3127:  app.use("/api/admin/report-prefs", adminReportsPrefsRouter.default);
server/index.ts:3128:  app.use("/api/lender/reports", lenderReportsRouter.default);
server/index.ts:3129:  app.use("/api/admin/lender-reports", adminLenderReportsRouter.default);
server/index.ts:3130:  app.use("/api/audit", auditRouter.default);
server/index.ts:3140:  app.use("/api/tenant", detectTenant, tenantSwitchRouter.default);
server/index.ts:3141:  app.use("/api/unified-comms", detectTenant, unifiedCommsRouter.default);
server/index.ts:3142:  app.use("/api/contacts", detectTenant, contactsRouter.default);
server/index.ts:3143:  app.use("/api/contact-import", detectTenant, contactImportRouter.default);
server/index.ts:3157:  app.use("/api/users", usersRouter.default);
server/index.ts:3166:  app.use("/api/lender", lenderRouter.default);
server/index.ts:3175:  app.use("/api/test-correct-bucket", testCorrectBucket.default);
server/index.ts:3184:  app.use("/api/test-s3-document-access", testS3DocumentAccess.default);
server/index.ts:3344:// app.use("/api/bulletproof-auth", bulletproofAuthRoutes);
server/index.ts:3345:// app.use("/api/unified-auth", unifiedAuthRoutes);
server/index.ts:3348:// DISABLED DUPLICATE: app.use("/api/rbac/auth", rbacAuthRoutes);
server/index.ts:3361://     app.use("/api/dev", dev);
server/index.ts:3377:app.use("/api/dev/iframe-auth", devIframeAuthRouter);
server/index.ts:3391:// DISABLED DUPLICATE: // app.use("/api/auth", emergencyAuthRouter);
server/index.ts:3395:// app.use("/api/standardized-auth", standardizedAuthRouter);
server/index.ts:3405:app.use("/api/applications", createAutoSmsApplicationTrigger());
server/index.ts:3406:app.use("/api/applications", createAutoSmsStageCorrection());
server/index.ts:3409:app.use("/api/applications", applicationsRouter.default);
server/index.ts:3414:app.use("/api/document-reupload", documentReuploadRouter.default);
server/index.ts:3424:  app.use("/api/crm/contact-card", crmContactCardRouter.default);
server/index.ts:3434:  app.use("/api/twilio/contact-card", twilioContactCardRouter.default);
server/index.ts:3441:  app.use("/api/twilio/contact-card", twilioContactCardRouter.default);
server/index.ts:3450:  app.use("/api/msgraph", microsoftGraphContactCardRouter.default);
server/index.ts:3459:  app.use("/api/analytics", recommendationLoggerRouter.default);
server/index.ts:3468:  app.use("/api/chat", chatRouter.default);
server/index.ts:3469:  app.use("/api/public/chat", chatRouter.default);
server/index.ts:3478:  app.use("/api/internal/document-types", documentTypeMappingRouter.default);
server/index.ts:3486:app.use("/api/pdf-generation", pdfGenerationRouter.default);
server/index.ts:3493://   app.use("/api/pipeline", pipelineRouter.default);
server/index.ts:3502:// app.use("/api/communication", communicationRouter.default);
server/index.ts:3507:app.use("/api/twilio/voice", twilioVoiceRouter.default);
server/index.ts:3512:app.use("/api/twilio", twilioCalls.default);
server/index.ts:3517:app.use("/api/admin/uploads", adminUploadDashboard.default);
server/index.ts:3522:app.use("/api/debug", debugSMSRouter.default);
server/index.ts:3530:  app.use("/api/settings", settingsRouter.default);
server/index.ts:3538:app.use("/api/emergency", emergencyAccessRouter.default);
server/index.ts:3547:app.use("/api/users", userManagementRouter.default);
server/index.ts:3553:  app.use("/api/system", systemDiagnosticsRouter.default);  
server/index.ts:3562:  app.use("/api/document-resync", documentResyncRouter.default);
server/index.ts:3570:app.use("/api/document-cleanup", documentCleanupRouter.default);
server/index.ts:3574:app.use("/api/bulletproof", bulletproofHealthRouter.default);
server/index.ts:3583:app.use("/api/s3", s3ManagementRouter.default);
server/index.ts:3587:app.use("/api/aws", awsCredentialRouter.default);
server/index.ts:3592:  app.use("/api/enhanced-ocr", enhancedOcrRouter.default);
server/index.ts:3606:  app.use("/api/contacts", contactsRouter.default);
server/index.ts:3607:  app.use("/api/contacts", contactsDedup.default);
server/index.ts:3608:  app.use("/api/segments", segmentsRouter.default);
server/index.ts:3609:  app.use("/api/templates", templatesRouter.default);
server/index.ts:3610:  app.use("/api/contacts/communications", contactsCommunicationsRouter.default);
server/index.ts:3615:  app.use("/api/campaigns", campaignsRouter.default);
server/index.ts:3616:  app.use("/api/linkedin", linkedinRouter.default);
server/index.ts:3632:app.use("/api/diagnostic", credentialDiagnosticRouter.default);
server/index.ts:3725:app.use("/api/bulletproof", bulletproofHealthV2Router.default);
server/index.ts:3731:  app.use("/api/sms-notifications", smsStageRouter.default);
server/index.ts:3740:  app.use("/api/ocr-trigger", ocrTriggerRouter.default);
server/index.ts:3749:  app.use("/api/comprehensive", comprehensiveRouter.default);
server/index.ts:3762:  app.use("/api/enhanced-sms", enhancedSmsRouter.default);
server/index.ts:3771:  app.use("/api/pipeline-automation", pipelineAutomationRouter.default);
server/index.ts:3782:  app.use("/api/public/upload", createAutoProcessorMiddleware());
server/index.ts:3783:  app.use("/api/documents/upload", createAutoProcessorMiddleware());
server/index.ts:3784:  app.use("/api/upload", createAutoProcessorMiddleware());
server/index.ts:3796:  app.use("/api/public/upload", createDocumentUploadStageUpdater());
server/index.ts:3797:  app.use("/api/documents/upload", createDocumentUploadStageUpdater());
server/index.ts:3798:  app.use("/api/upload", createDocumentUploadStageUpdater());
server/index.ts:3799:  app.use("/api/documents", createDocumentAcceptanceStageUpdater());
server/index.ts:3809:  app.use("/api/auto-documents", autoDocumentRouter.default);
server/index.ts:3818:  app.use("/api/twilio/voice", twilioVoiceRouter.default);
server/index.ts:3905:app.use("/api/auto-restore", autoRestoreRouter.default);
server/index.ts:3933:  app.use("/api/public", retryUploadHandler.default);
server/index.ts:5590:  // app.use("/api/public", publicApiRouter.default); // Contains additional routes without auth
server/index.ts:5598:  app.use("/api/public/documents", publicApplicationDocumentsRouter.default);
server/index.ts:5603:  app.use("/api/public/applications", (req, res, next) => {
server/index.ts:5615:  app.use("/api/public/applications", signatureStatusRouter);
server/index.ts:5704:  app.use("/api/admin/applications", adminDuplicateOverride.default);
server/index.ts:5723:  app.use("/api/matching", matchingEngineRouter.default);
server/index.ts:5724:  app.use("/api/transmit", matchingEngineRouter.default);
server/index.ts:5748:    app.use("/api/s3-debug", s3DebugRouter.default);
server/index.ts:5756:  app.use("/api/bulletproof", healthCheckRouter.default);
server/index.ts:5761:  app.use("/api/admin", adminReassignmentRouter.default);
server/index.ts:5766:  app.use("/api/data-integrity", dataIntegrityRouter.default);
server/index.ts:5879:      app.use("/api/public/applications", documentBypassRouter.default);
server/index.ts:5894:      // app.use("/api/applications", testAppsRoutes.default);
server/index.ts:6031:  // app.use("/api/documents", documentManagementRouter.default);
server/index.ts:6045:  app.use("/api/debug", debugRouter.default);
server/index.ts:6049:  app.use("/api/lender-scoring", lenderScoringRouter.default);
server/index.ts:6055:  app.use("/api/automation", automationDemoRouter.default);
server/index.ts:6085:  app.use("/api/documents", documentVersioningRoutes.default);
server/index.ts:6089:  app.use("/api/documents/backup", documentBackupStatusRoutes.default);
server/index.ts:6093:  app.use("/api/documents", documentReprocessingRoutes.default);
server/index.ts:6097:  app.use("/api/documents/metadata", documentMetadataRoutes.default);
server/index.ts:6101:  app.use("/api/admin/upload-logs", adminUploadLogsRoutes.default);
server/index.ts:6105:  app.use("/api/documents", base64UploadRoutes.default);
server/index.ts:6109:  app.use("/api/documents", documentAuditTrailRoutes.default);
server/index.ts:6113:  app.use("/api/documents/webhooks", documentWebhooksRoutes.default);
server/index.ts:6117:  app.use("/api/documents/analytics", documentAnalyticsRoutes.default);
server/index.ts:6172:  app.use("/api/lender-2fa", lender2FARouter.default);
server/index.ts:6177:  app.use("/api/cache", cacheRouter.default);
server/index.ts:6182:  app.use("/api/template", templateTestRouter.default);
server/index.ts:6187:  app.use("/api/crm", crmRouter.default);
server/index.ts:6192:  app.use("/api/public/crm", crmPublicRouter.default);
server/index.ts:6197:  app.use("/api/public/ai", aiRouter.default);
server/index.ts:6203:  app.use("/api/contacts", contactsRouter.default);
server/index.ts:6210:  app.use("/api/twilio", twilioRouter.default);
server/index.ts:6215:  app.use("/api/enhanced-twilio", enhancedTwilioRouter.default);
server/index.ts:6254:  app.use("/api/debug", twilioDebugRouter.default);
server/index.ts:6259:  // app.use("/api/debug/signnow", signNowFieldVerificationRouter.default);
server/index.ts:6267:  // app.use("/api/debug", inspectTemplateRouter.default);
server/index.ts:6272:  // app.use("/api/debug", templateFieldVerificationRouter.default);
server/index.ts:6296:  app.use("/api/debug", otpDebugRouter.default);
server/index.ts:6608://   app.use("/api/rbac", rbacRoutes.default);
server/index.ts:6619:  app.use("/api/staff/lender-products", staffLenderProductsRouter.default);
server/index.ts:6631:  app.use("/api/lender-products", lenderProductsUnifiedRouter.default);
server/index.ts:6714:  app.use("/api/integrations/o365", o365Routes.default);
server/index.ts:6718:  app.use("/api/integrations/calendar", calendarRoutes.default);
server/index.ts:6722:  app.use("/api/integrations/tasks", tasksRoutes.default);
server/index.ts:6734:  app.use("/api/marketing", marketingCampaignsRoutes.default);
server/index.ts:6738:  app.use("/api/marketing", marketingABTestsRoutes.default);
server/index.ts:6742:  app.use("/api/marketing", marketingBudgetsRoutes.default);
server/index.ts:6765:  app.use("/api/lender-recommendations", lenderRecommendationRoutes.default);
server/index.ts:6776:  app.use("/api/missing-docs", missingDocsReminderRoutes.default);
server/index.ts:6781:  app.use("/api/push", pushRoutes.default);
server/index.ts:6786:  app.use("/api/push", pushMultiplatformRoutes.default);
server/index.ts:6808://   app.use("/api/pipeline", pipelineEnhancedRoutes.default);
server/index.ts:6818://   app.use("/api/applications", applicationsEnhancedRoutes.default);
server/index.ts:6828://   app.use("/api/crm", crmEnhancedRoutes.default);
server/index.ts:6838://   app.use("/api/documents", documentsEnhancedRoutes.default);
server/index.ts:6848://   app.use("/api/communication", communicationEnhancedRoutes.default);
server/index.ts:6858://   app.use("/api/marketing", marketingEnhancedRoutes.default);
server/index.ts:6868://   app.use("/api/escalations", escalationsEnhancedRoutes.default);
server/index.ts:6878://   app.use("/api/reports", analyticsDashboardRoutes.default);
server/index.ts:6888://   app.use("/api/reports-enhanced", reportsEnhancedRoutes.default);
server/index.ts:6898://   app.use("/api/integrations", calendarTasksRealRoutes.default);
server/index.ts:6908://   app.use("/api/settings", settingsEnhancedRoutes.default);
server/index.ts:6918://   app.use("/api/webhooks", webhooksEnhancedRoutes.default);
server/index.ts:7508:  app.use("/api/ops", module.default);
server/index.ts:7516:app.use("/api/auth", passwordLogin);
server/clean-index.ts:43:app.use("/api/pipeline", pipelineRoutes);

== AFTER FIX: any wildcard handlers (should be disabled) ==

== AFTER FIX: SPA mount present ==
7519:mountSpa(app);
